!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@ali/wpk-reporter")):"function"==typeof define&&define.amd?define(["exports","@ali/wpk-reporter"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).iLogger={},e.wpkReporter)}(this,(function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=n(t);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,m(o.key),o)}}function l(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t,n){return(t=m(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,i,r,a,c=[],s=!0,l=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(o=r.call(n)).done)&&(c.push(o.value),c.length!==t);s=!0);}catch(e){l=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return c}}(e,t)||w(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||w(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function m(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.search,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e;if(e.includes("?")){var o=p(e.split("?"),2)[1];n=void 0===o?"":o}if(n.includes("#")){var i=p(n.split("#"),1)[0];n=void 0===i?"":i}for(var r=n.split("&"),a={};r.length;){var c=p(r.shift().split("="),2),s=c[0],l=void 0===s?"":s,u=c[1],d=void 0===u?"":u;l&&(a[l]=t?decodeURIComponent(d):d)}return a},v=!1;function _(e){return window.__PAGE_NAME?"".concat(window.__PAGE_NAME,"-").concat(e):e}function y(){return((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")||window.location.search.slice(1)).split("&").reduce((function(e,t){var n=p(t.split("="),2),o=n[0],i=n[1];return e[o]=i,e}),{})}function b(e){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=w(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw r}}}}(e.split("\r\n"));try{for(n.s();!(t=n.n()).done;){var o=t.value;if(o.indexOf("x-eagleeye-id")>-1){var i=o.split(":");return i[1]?i[1]:""}}}catch(e){n.e(e)}finally{n.f()}return""}function T(){return(navigator.userAgent||"").toLowerCase().indexOf("android")>-1}function S(){var e="",t=document.head.querySelector('meta[name="itrace-bid"]')||document.head.querySelector('meta[name="wpk-pid"]')||document.head.querySelector('meta[name="wpk-bid"]');return t&&t.getAttribute("content")&&(e=t.getAttribute("content")),e}var O="OTHER";function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"POST",n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,i=arguments.length>2?arguments[2]:void 0;!function(e){for(var t in e)void 0===e[t]&&delete e[t]}(e=Object.assign(Object.assign({},o),e));var r=e.group;Array.isArray(r)&&(e.group=r.join("|")),0!==i.indexOf("/")&&(i="/".concat(i));var a=Object.keys(e).map((function(t){return"".concat(t,"=").concat("string"==typeof e[t]?e[t]:JSON.stringify(e[t]))})).join("&");window.goldlog&&window.goldlog.record?window.goldlog.record(i,n||O,a,"POST"===t?"POST":"GET"):(window.goldlog_queue||(window.goldlog_queue=[])).push({action:"goldlog.record",arguments:[i,n||O,a,"POST"===t?"POST":"GET"]})}var E="/lazada-marketing.ug.benefit",x=["promotion_id","promotion_status","plan_id"],P=["tag_id","tag_union_id","promotion_source","promotion_allow_cnt","promotion_amount","discount_type","percent_amount","collect_id","offer_benefit_id","min_spend","cap_value","scene_id","app"],j=["is_auto_collect"],L=["exp_type"],I=function(){function e(t){c(this,e),this.baseParams={};var n=this.basic_info_check(t);if(n.is_check)n.warnMessage&&console.warn(n.warnMessage),this.setbaseInfo(t);else if(n.errorMessage)throw new Error(n.errorMessage)}return l(e,[{key:"setbaseInfo",value:function(e){this.baseParams=Object.assign(Object.assign({},this.baseParams),e)}},{key:"getbaseInfo",value:function(){return this.baseParams}},{key:"benefit_info_check",value:function(e){var t=x.filter((function(t){return void 0===e[t]||""===e[t]})),n=P.filter((function(t){return void 0===e[t]||""===e[t]})),o=!0;return n&&n.length&&(console.warn("benefit info check failed, no ".concat(n.join(","),".")),o=!0),t&&t.length&&(console.error("benefit info check failed, no ".concat(t.join(","),".")),o=!1),o}},{key:"basic_info_check",value:function(e){var t=L,n=[],o=[];return j.forEach((function(t){Array.isArray(t)?t.some((function(t){return!(void 0===e[t]||""===e[t])}))||n.push.apply(n,f(t)):void 0!==e[t]&&""!==e[t]||n.push(t)})),t.forEach((function(t){Array.isArray(t)?t.some((function(t){return!(void 0===e[t]||""===e[t])}))||o.push.apply(o,f(t)):void 0!==e[t]&&""!==e[t]||o.push(t)})),n&&n.length?{is_check:!1,errorMessage:n.length>0?"benefit info check failed, no ".concat(n.join(","),"."):null}:o&&o.length?{is_check:!0,warnMessage:o.length>0?"benefit info check failed, no ".concat(o.join(","),"."):null}:{is_check:!0}}},{key:"init_log",value:function(){k({event_name:"init"},"POST",E,O,this.getbaseInfo())}},{key:"req_exp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};k(Object.assign(Object.assign({},e),{event_name:"req_exp"}),"POST",E,O,this.getbaseInfo())}},{key:"req_exp_callback",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};k(Object.assign(Object.assign({},e),{event_name:"req_exp_callback"}),"POST",E,O,this.getbaseInfo())}},{key:"poplayer_open",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};k(Object.assign(Object.assign({},e),{event_name:"poplayer_open"}),"POST",E,O,this.getbaseInfo())}},{key:"manual_exp",value:function(e){var t=this.benefit_info_check(e);if(!t)return t;k(Object.assign(Object.assign({},e),{event_name:"exp"}),"POST",E,O,this.getbaseInfo())}},{key:"toggle_max",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};k(Object.assign(Object.assign({},e),{event_name:"toggle_max"}),"POST",E,O,this.getbaseInfo())}},{key:"toggle_min",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};k(Object.assign(Object.assign({},e),{event_name:"toggle_min"}),"POST",E,O,this.getbaseInfo())}},{key:"collect_click",value:function(e){var t=this.benefit_info_check(e);if(!t)return t;k(Object.assign(Object.assign({},e),{event_name:"collect_click"}),"POST",E,O,this.getbaseInfo())}},{key:"collect_callback",value:function(e){var t=this.benefit_info_check(e);if(!t)return t;k(Object.assign(Object.assign({},e),{event_name:"collect_callback"}),"POST",E,O,this.getbaseInfo())}}]),e}(),C=function(){function e(t){var n=this;c(this,e),this.getSpm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"".concat(n.getSpmAB().spmA,".").concat(n.getSpmAB().spmB,".").concat(e||n.spmC||0,".").concat(t||n.spmD||0)},this.getSpmLink=function(e,t,o){if(!e)return e;var i="spm=".concat(n.getSpm(t||n.spmC,o||n.spmD)),r=p(e.split("#"),2),a=r[0],c=r[1],s=p(a.split("?"),2)[1],l=((void 0===s?"":s).match(/(.*?)=(.*?)(&|$)/g)||[]).map((function(e){return"&"===e[e.length-1]?e.substring(0,e.length-1):e})).reduce((function(e,t){var n=t.match(/(.*)=(.*)/);return e[n[1]]=n[2],e}),{});if(l.spm)return e;var u=a;return a.indexOf("?")>-1?Object.keys(l).length>0?u+="&".concat(i):u+="".concat(i):u+="?".concat(i),c&&(u+="#".concat(c)),u},t.benefitOptions&&(this.benefit=new I(Object.assign(Object.assign({},t.benefitOptions),{module:t.module}))),this.baseParams={},this.initSpm(t.spm),this.setbaseInfo(t)}return l(e,[{key:"setbaseInfo",value:function(e){this.baseParams=Object.assign(Object.assign({},this.baseParams),e)}},{key:"getbaseInfo",value:function(){return this.baseParams}},{key:"initSpm",value:function(e){var t,n,o,i,r,a;if(e){var c=e.split(".");switch(c.length){case 1:this.spmC=c[0];break;case 2:this.spmC=c[0],this.spmD=c[1];break;case 3:this.spmA=c[0],this.spmB=c[1],this.spmC=c[2];break;case 4:this.spmA=c[0],this.spmB=c[1],this.spmC=c[2],this.spmC=c[3]}}this.spmA=this.spmA||(null===(t=null===window||void 0===window?void 0:window.$pegasus)||void 0===t?void 0:t.spma)||(null===(o=null===(n=null===window||void 0===window?void 0:window.g_config)||void 0===n?void 0:n.pageInfo)||void 0===o?void 0:o.spma),this.spmB=this.spmB||(null===(i=null===window||void 0===window?void 0:window.$pegasus)||void 0===i?void 0:i.spmb)||(null===(a=null===(r=null===window||void 0===window?void 0:window.g_config)||void 0===r?void 0:r.pageInfo)||void 0===a?void 0:a.spmb)}},{key:"getSpmAB",value:function(){return{spmA:this.spmA,spmB:this.spmB}}},{key:"moduleExp",value:function(e){if(!(null==e?void 0:e.spm_c))throw new Error("module exp error, no spmC ");k(Object.assign(e,{spm:"".concat(this.spmA,".").concat(this.spmB,".").concat(e.spm_c||this.spmC)}),"POST","/lzd.aplus-module-manual.exp","EXP",this.getbaseInfo())}},{key:"expo",value:function(e){var t,n,o,i=null===(t=null==e?void 0:e.spm_cd)||void 0===t?void 0:t.split(".");i.length>1?(n=i[0]||this.spmC,o=i[1]||this.spmD):(i.length=1)&&(n=this.spmC,o=i[0]||this.spmD),k(Object.assign(e,{spm:"".concat(this.spmA,".").concat(this.spmB,".").concat(n,".").concat(o),event_name:e.event_name||"expose"}),"POST","/lzd.aplus-manual.exp","EXP",this.getbaseInfo())}},{key:"click",value:function(e){var t,n,o,i=null===(t=null==e?void 0:e.spm_cd)||void 0===t?void 0:t.split(".");i.length>1?(n=i[0]||this.spmC,o=i[1]||this.spmD):(i.length=1)&&(n=this.spmC,o=i[0]||this.spmD),k(Object.assign(e,{spm:"".concat(this.spmA,".").concat(this.spmB,".").concat(n,".").concat(o,"}"),event_name:e.event_name||"click"}),"POST","/lzd.aplus-manual.clk","CLK",this.getbaseInfo())}},{key:"other",value:function(e){var t;if(!(null==e?void 0:e.event_name))throw new Error("error, no event_name");var n,o,i=(null===(t=null==e?void 0:e.spm_cd)||void 0===t?void 0:t.split("."))||[];i.length>1?(n=i[0]||this.spmC,o=i[1]||this.spmD):(i.length=1)&&(n=this.spmC,o=i[0]||this.spmD),k(Object.assign(e,{spm:"".concat(this.spmA,".").concat(this.spmB,".").concat(n,".").concat(o)}),"POST","/lzd.aplus-manual.other",O,this.getbaseInfo())}}]),e}(),R=["group","biz","event"],A=new C({spm:"",module:"",bizname:""});function D(e){var t=e.group,n=e.biz,o=e.event,i=d(e,R);A.other({spm_cd:"",module:"",group:t||"h5-itrace-sdk",bizname:n||"",event_name:o||"",user_data:r({},i)})}var N=0,M=0,z=0;function q(e,t,n,o){var i=function(e,t){return t||(N=N||performance.timeOrigin,e?e-N:+new Date-N-z)}(e,t),r=+new Date;M=performance.now()||0,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!(window.WindVane||{}).isAvailable)return!1;var o=location,i=o.origin+o.pathname;i=window.__SSR_STATUS__?o.search?i+o.search+"&pageType=SourcePageSSR"+o.hash:i+"?pageType=SourcePageSSR"+o.hash:location.href,window.WindVane&&window.WindVane.call("LACustomWVPlugin","reportPerformanceInfo",{webViewType:n,url:i,containerType:"object"===a(window.__pha_environment__)?1:0,firstScreenPaint:e,firstScreenPaintTimeStamp:t},(function(){console.log("[component_did_mount_hook] report time to App",e)}),(function(e){console.log("err",e)}))}(i,r),function(e,t,n,o){window.__wpk&&window.__wpk.report&&(window.__wpk.report(Object.assign({category:203,msg:_("componentDidMount"),wl_avgv1:e,c1:e,c2:N,c3:t||"-",c4:z,c5:M,c6:window.__SSR_STATUS__?"SourcePageSSR":""},o)),console.log("[component_did_mount_hook] report time to iTrace",e))}(i,r,0,o)}window.__WindVane=window.WindVane||{};var F,H=function(){window.lzdiTraceLifeCircle=Object.assign({},window.lzdiTraceLifeCircle),window.lzdiTraceLifeCircle.lzdiTraceShareDidMountTime=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(window.rocket_pre_hot)return null;"function"==typeof window.clearTraceLifeQueue&&window.clearTraceLifeQueue(),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"POST";0!==e.indexOf("/")&&(e="/".concat(e));var i=Object.keys(n).map((function(e){return"".concat(e,"=").concat("string"==typeof n[e]?n[e]:JSON.stringify(n[e]))})).join("&");window.goldlog&&window.goldlog.record?window.goldlog.record(e,t,i,"POST"===o?"POST":"GET"):(window.goldlog_queue||(window.goldlog_queue=[])).push({action:"goldlog.record",arguments:[e,t,i,"POST"===o?"POST":"GET"]})}("/lzdfe.pageModule.exp","EXP"),q(e,t,0,n),window.lzdiTraceLifeCircle&&window.lzdiTraceLifeCircle.FirstScreenRenderingEnd()},window.lzdiTraceLifeCircle&&window.lzdiTraceLifeCircle.FirstScreenRenderingStart()};function B(e){return e.split(".").map((function(e){return parseInt(e,10)}))}function K(e){var t=function(){if(void 0!==F)return F;var e=navigator.userAgent.match(/AliApp\(LA\/(\d+.\d+.\d+)\)/);return F=e&&e.length>1?e[1]:""}();return!!function(e){return/^\d+(\.\d+)+$/.test(e)}(t)&&function(e,t){for(var n=B(e),o=B(t),i=0;i<Math.max(n.length,o.length);i++){if(n[i]>o[i])return 1;if(n[i]<o[i])return-1}return 0}(t,e)>=0}function W(){var e=window.navigator.userAgent;return/Android/.test(e)?"android":/(iPhone|iPod)/.test(e)?"ios":/Windows\sPhone/.test(e)?"windows_phone":"unknown"}var G=function(e){if("unknown"!==W()&&("ios"!==W()||K("7.2.0"))&&("android"!==W()||K("7.3.0"))&&window.WindVane)try{window.WindVane.call("LAWVNexpInfo","reportNexpInfo",e,(function(){console.log("reportNexpInfo:",e)}),(function(e){console.warn("reportNexpInfo failed:",e)}))}catch(e){console.error("report badcase error:",e)}},U=function(e){return Math.random()<e},J=function(e){return"string"==typeof e?parseInt(e):e},V={},X=[],Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(K("7.4.0"))if("function"==typeof window.clearTraceLifeQueue&&window.clearTraceLifeQueue(),window.WindVane){(e=[].concat(e)).forEach((function(e){if(e.event&&e.time&&(V[e.event]=e.time,"first_screen_rendering_end"===e.event&&e.costTime>3e3||"fsp_end"===e.event&&e.costTime>5e3)){var t=y();G({module:"h5_perf",subModule:window.location.href,info:r(r({},e),{},{query:t,timeline:V})})}}));try{window.WindVane.call("LACustomWVPlugin","reportLifecycle",{lifecycles:e},(function(){console.log("reportLifecycle:",e)}),(function(e){console.warn("reportLifecycle failed:",e)}))}catch(e){console.error("report lifecyle error:",e)}}else X.push(e)},$=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e?null:{},o=document.cookie?document.cookie.split("; "):[],i=/(%[0-9A-Z]{2})+/g,r=0;r<o.length;r++){var a=o[r].split("="),c=a.slice(1).join("=");t.json||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var s=a[0].replace(i,decodeURIComponent);if(c=c.replace(i,decodeURIComponent),t.json)try{c=JSON.parse(c)}catch(e){}if(e===s){n=c;break}e||(n[s]=c)}catch(e){}}return n},Q=navigator.userAgent||"";h();"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function Z(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ee={exports:{}};!function(e,t){e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==a(e)&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t){e.exports={sdk:{BID:"wpkreporter",CID:"jssdk",WID_KEY:"__wpkreporterwid_"},env:{BROWSER:"browser",NODEJS:"nodejs",WEEX:"weex"},px:{signKey:"Uvn#08uefVdwe&c4",addr:{cn:"http://px.effirst.com/api/v1/jssdk/upload",cn_https:"https://px.effirst.com/api/v1/jssdk/upload",quark:"http://px.wpk.quark.cn/api/v1/jssdk/upload",quark_https:"https://px.wpk.quark.cn/api/v1/jssdk/upload",intl:"http://px-intl.ucweb.com/api/v1/jssdk/upload",intl_https:"https://px-intl.ucweb.com/api/v1/jssdk/upload",qg:"http://px-itrace.xuexi.cn/api/v1/jssdk/upload",qg_https:"https://px-itrace.xuexi.cn/api/v1/jssdk/upload"},confAddr:{cn:"http://px.effirst.com/api/v1/jconfig",cn_https:"https://px.effirst.com/api/v1/jconfig",intl:"http://px-intl.ucweb.com/api/v1/jconfig",intl_https:"https://px-intl.ucweb.com/api/v1/jconfig",qg:"http://px-itrace.xuexi.cn/api/v1/jconfig",qg_https:"https://px-itrace.xuexi.cn/api/v1/jconfig",quark:"http://px.wpk.quark.cn/api/v1/jconfig",quark_https:"https://px.wpk.quark.cn/api/v1/jconfig"}},http:{methods:{GET:"GET",PUT:"PUT",POST:"POST",HEAD:"HEAD",DELETE:"DELETE",OPTIONS:"OPTIONS",CONNECT:"OPTIONS",TRACE:"OPTIONS",PATCH:"OPTIONS"},protocols:{HTTP:"http:",HTTPS:"https:"}},category:{JSERR:1,API:2,JSFSPERF:3,RESLOADFAIL:4,FLOW:5,BKPG:6,HARLOG:7,PERFNEXT:1e3,MAINDOC:1e5,RESTIMING:100001},navConn:{types:{BLUETOOTH:"bluetooth",CELLULAR:"cellular",ETHERNET:"ethernet",MIXED:"mixed",NONE:"none",OTHER:"other",UNKNOWN:"unknown",WIFI:"wifi",WIMAX:"wimax"},effectiveTypes:{"2G":"2g","3G":"3g","4G":"4g",SLOW2G:"slow-2g"}}}},,,function(e,t,n){var o=n(0).env,i=function(e){var t;return(e&&(t=e.replace(/^#\/?/,""))&&"string"==typeof t?t.replace(/^(https?:)?\/\//,"").replace(/\?.*$/,""):"")||"[index]"},r=function(e,t){if(t=t||{},e.env===o.BROWSER&&window)if(e.toolKit.extend({enable:!0},t).enable){e.logger.info("wpkflowPlugin已开启");var r,a,c=function(){e.reportFlow()};e.toolKit.isPageReady(e.prerender)?setTimeout(c,0):e.toolKit.onPageReady(c,!0,e.prerender),e.spa&&(n(4)(),r=function(t){i(location.hash)&&(e._begin=Date.now(),e._sid=e.toolKit.getSessionId(),e.reportFlow())},a=function(t){i(t.detail)&&(e._begin=Date.now(),e._sid=e.toolKit.getSessionId(),e.reportFlow())},e.toolKit.onListen(window,"hashchange",r),e.toolKit.onListen(window,"historystatechange",a)),e.toolKit.onListen(window,"beforeunload",(function(){e.toolKit.offListen(window,"load"),e.toolKit.offListen(window,"hashchange"),e.toolKit.offListen(window,"historystatechange"),c=r=a=null}))}else e.logger.info("wpkflowPlugin已关闭")};r.prototype.pluginId="flow",e.exports=r},function(e,t){var n=window.history||{},o=window.document,i=function(e,t){var n;window.CustomEvent?n=new CustomEvent(e,{detail:t}):((n=o.createEvent("HTMLEvents")).initEvent(e,!1,!0),n.detail=t),window.dispatchEvent(n)},r=function(e){return e&&"string"==typeof e?e.replace(/^(https?:)?\/\//,"").replace(/\?.*$/,""):""},a=function(e){var t=n[e];"function"==typeof t&&(n[e]=function(e,o,a){var c=location.href,s=t.call(n,e,o,a);if(!a||"string"!=typeof a)return s;if(a===c)return s;try{var l=c.split("#"),u=a.split("#"),d=r(l[0]),p=r(u[0]),f=l[1]&&l[1].replace(/^\/?(.*)/,"$1"),w=u[1]&&u[1].replace(/^\/?(.*)/,"$1");d!==p?i("historystatechange",p):f!==w&&i("historystatechange",w)}catch(e){}return s},n[e].toString=e+"() { [native code] }")};e.exports=function(){a("pushState"),a("replateState")}}])}(ee);var te=Z(ee.exports),ne={exports:{}};!function(e,t){e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==a(e)&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}({0:function(e,t){e.exports={sdk:{BID:"wpkreporter",CID:"jssdk",WID_KEY:"__wpkreporterwid_"},env:{BROWSER:"browser",NODEJS:"nodejs",WEEX:"weex"},px:{signKey:"Uvn#08uefVdwe&c4",addr:{cn:"http://px.effirst.com/api/v1/jssdk/upload",cn_https:"https://px.effirst.com/api/v1/jssdk/upload",quark:"http://px.wpk.quark.cn/api/v1/jssdk/upload",quark_https:"https://px.wpk.quark.cn/api/v1/jssdk/upload",intl:"http://px-intl.ucweb.com/api/v1/jssdk/upload",intl_https:"https://px-intl.ucweb.com/api/v1/jssdk/upload",qg:"http://px-itrace.xuexi.cn/api/v1/jssdk/upload",qg_https:"https://px-itrace.xuexi.cn/api/v1/jssdk/upload"},confAddr:{cn:"http://px.effirst.com/api/v1/jconfig",cn_https:"https://px.effirst.com/api/v1/jconfig",intl:"http://px-intl.ucweb.com/api/v1/jconfig",intl_https:"https://px-intl.ucweb.com/api/v1/jconfig",qg:"http://px-itrace.xuexi.cn/api/v1/jconfig",qg_https:"https://px-itrace.xuexi.cn/api/v1/jconfig",quark:"http://px.wpk.quark.cn/api/v1/jconfig",quark_https:"https://px.wpk.quark.cn/api/v1/jconfig"}},http:{methods:{GET:"GET",PUT:"PUT",POST:"POST",HEAD:"HEAD",DELETE:"DELETE",OPTIONS:"OPTIONS",CONNECT:"OPTIONS",TRACE:"OPTIONS",PATCH:"OPTIONS"},protocols:{HTTP:"http:",HTTPS:"https:"}},category:{JSERR:1,API:2,JSFSPERF:3,RESLOADFAIL:4,FLOW:5,BKPG:6,HARLOG:7,PERFNEXT:1e3,MAINDOC:1e5,RESTIMING:100001},navConn:{types:{BLUETOOTH:"bluetooth",CELLULAR:"cellular",ETHERNET:"ethernet",MIXED:"mixed",NONE:"none",OTHER:"other",UNKNOWN:"unknown",WIFI:"wifi",WIMAX:"wimax"},effectiveTypes:{"2G":"2g","3G":"3g","4G":"4g",SLOW2G:"slow-2g"}}}},6:function(e,t,n){var o=n(0),i=o.sdk,r=o.http.methods,a=o.category,c=function(e){return e>=200&&e<=299},s=function(e){return-1===e.indexOf("//arms-retcode")&&-1===e.indexOf("//retcode.taobao.com")&&-1===e.indexOf("aliyuncs.com/r.png")&&-1===e.indexOf("//mdap.alipay.com/loggw")&&-1===e.indexOf("//wpk-gateway")&&-1===e.indexOf("//px.wpk.quark.cn")&&-1===e.indexOf("//px.ucweb.com")&&-1===e.indexOf("//px.effirst.com")&&-1===e.indexOf("//px-intl.ucweb.com")&&-1===e.indexOf("//gm.mmstat.com/arms.1.1")&&-1===e.indexOf("//gm.mmstat.com/arms.1.2")&&-1===e.indexOf("//g.alicdn.com/alilog")&&-1===e.indexOf("//log.m.sm.cn/0.gif")},l=function(e,t){if(e.hasOwnProperty(t))return e[t]},u=function(e,t,n){e.toolKit.isObject(n)&&e.toolKit.extend(t,{c1:l(n,"c1"),c2:l(n,"c2"),c3:l(n,"c3"),c4:l(n,"c4"),c5:l(n,"c5"),bl1:l(n,"bl1"),bl2:l(n,"bl2"),bl3:l(n,"bl3"),bl4:l(n,"bl4"),bl5:l(n,"bl5")}),e.report(t)},d=location.origin,p=function(e){return!e||0===e.indexOf(d)||!/^(\/\/|http:|https:).*/.test(e)};function f(e,t){var n=null;try{var o,i,r,a=e.toolKit.trim(t||"").split(/[\r\n]+/);a.length>0&&(n={},e.toolKit.forEach(a,(function(e){o=e.split(": "),i=o.shift(),r=o.join(": "),n[i]=r})))}catch(e){}return n}function w(e){try{if(!e)return{};var t={};return e.forEach((function(e,n){t[n]=e})),t}catch(e){return{}}}var g=function(e,t){if(e.env===o.env.BROWSER&&window){var n={enable:!0,sampleRate:1,enableTrace:!1,enableCorsTrace:function(e){return!1},requestHeaders:{"x-wpk-reqid":function(){return e.toolKit.uuid(!1)},"x-wpk-bid":function(){return e.bid}},responseHeaders:["x-eagleeye-id","x-wpk-serverid"]},l=e.toolKit.extend(n,t);l.enable?(e.logger.info("wpkinterfacePlugin已开启"),"XMLHttpRequest"in window&&function(e,t){var n=window.XMLHttpRequest.prototype,o=n.open;n.open=function(n,i){this.__reqCtx__={method:n,url:i||"",start:Date.now()};var r=[].slice.call(arguments);o.apply(this,r);var a=this;t.enableTrace&&(p(i)||t.enableCorsTrace(i))&&e.toolKit.forEach(Object.getOwnPropertyNames(t.requestHeaders),(function(e){var n=t.requestHeaders[e]();a.setRequestHeader(e,n)}))};var l=n.setRequestHeader;n.setRequestHeader=function(e,t){var n=[].slice.call(arguments);l.apply(this,n),this.__reqCtx__&&(this.__reqCtx__.headers||(this.__reqCtx__.headers={}),this.__reqCtx__.headers[e]=t)};var d=n.send;n.send=function(n){var o=this;function l(){if(o.__reqCtx__&&4===o.readyState)try{var l=Date.now(),d=(o.responseURL||o.__reqCtx__.url).split("?"),p=d[0],w=d[1]||"",g="",m=o.__reqCtx__.headers||{};o.__reqCtx__.method.toUpperCase()!==r.GET&&n&&(g=JSON.stringify(n));var h=f(e,o.getAllResponseHeaders()),v=String(o.response),_=!0,y={};"function"==typeof t.errorFilter&&(_=!!(y=t.errorFilter.call(this,{url:p,status:o.status,response:v,body:g,queryString:w,reqHeaders:m,resHeaders:h})),e.logger.warn("api errorFilter执行结果：",y)),v.length>2048&&(v="[response content too large]");var b=l-o.__reqCtx__.start;if(_&&b<121e3&&s(p)){var T=y.bizCode||o.status,S=y.reqHeaders||m,O=y.resHeaders||h,k={category:a.API,sampleRate:t.sampleRate,w_res:p,w_param:w,w_body:c(T)||!t.withBody?"":g,w_method:o.__reqCtx__.method,w_rc:T,w_rt:b,w_resp:c(T)||!t.withResp?"":y.resp||v,w_hd:JSON.stringify(S),w_trace_reqid:S&&S["x-wpk-reqid"]||void 0,w_rshd:JSON.stringify(O),w_trace_serverid:O&&O["x-wpk-serverid"]||void 0,msg:y.msg||"",w_type:16};u(e,k,y)}}catch(t){e.reportError(t,{bid:i.BID,cid:i.CID,category:a.JSERR,sampleRate:1})}}if("onreadystatechange"in o&&"function"==typeof o.onreadystatechange){var p=o.onreadystatechange;o.onreadystatechange=function(){var e=[].slice.call(arguments);l.apply(this,e),p.apply(this,e)}}else o.onreadystatechange=l;var w=[].slice.call(arguments);return d.apply(this,w)}}(e,l),"fetch"in window&&function(e,t){var n=function(e){var t=(e||"").split("?");return{apiAddr:t[0],queryString:t.length>1&&t[1]||""}},o=function(n,o,i,r,s,l,u,d,p,f,w){var g=e.toolKit.isObject(d)?d:{},m=g.reqHeaders||l,h=g.resHeaders||u;return{w_res:n,w_param:o,w_method:i,w_rc:s,w_rt:r,w_hd:JSON.stringify(m),w_trace_reqid:m&&m["x-wpk-reqid"]||void 0,w_rshd:JSON.stringify(h),w_trace_serverid:h&&h["x-wpk-serverid"]||void 0,msg:g.msg||p||"",w_body:c(s)||!t.withBody?"":f,w_resp:c(s)||!t.withResp?"":g.resp||w||"",category:a.API,sampleRate:t.sampleRate,w_type:17}},l=function(n,o,i,r,a,c,s){var l={};return"function"==typeof t.errorFilter&&(l=t.errorFilter.call(this,{url:n,queryString:o,status:i,body:r,response:a,reqHeaders:c,resHeaders:s}),e.logger.warn("api errorFilter执行结果：",l)),l},d=window.fetch;window.fetch=function(){var c=[].slice.call(arguments),f=r.GET;c[1]&&c[1].method&&(f=c[1].method.toUpperCase());var g,m=c[0];g="string"==typeof m?m:m instanceof URL?m.toString():m.url||"",t.enableTrace&&(p(g)||t.enableCorsTrace(g))&&(c[1]?void 0===c[1].headers&&(c[1].headers={}):c[1]={headers:{}},e.toolKit.forEach(Object.getOwnPropertyNames(t.requestHeaders),(function(e){c[1].headers[e]=t.requestHeaders[e]()})));var h=Date.now(),v="",_=null;return c[1]&&(_=c[1].headers),f!==r.GET&&c[1]&&c[1].body&&(v=JSON.stringify(c[1].body)),d.apply(this,c).then((function(t){try{var r=Date.now(),d=n(t.url||c[0]),p=d.apiAddr,g=d.queryString,m=t.clone(),y=w(m.headers);m.text().then((function(n){n=n||"";var i=l.call(this,p,g,t.status,v,n,_,y),a=!!i;n=n.length>2048?"[response content too large]":n;var c=r-h;if(a&&c<121e3&&s(p)){var d=i.bizCode||t.status,w=o(p,g,f,c,d,_,y,i,void 0,v,n);u(e,w,i)}}))}catch(t){e.reportError(t,{bid:i.BID,cid:i.CID,category:a.JSERR,sampleRate:1})}return t})).catch((function(t){var i=n(c[0]),r=i.apiAddr,a=i.queryString,d=l.call(this,r,a,-1,v,"",_,{}),p=!!d,w=Date.now()-h;if(p&&w<121e3&&s(r)){var g=d.bizCode||-1,m=o(r,a,f,w,g,_,{},d,t.message,v,void 0);u(e,m,d)}throw t}))}}(e,l),(e.enableMtop||l.enableMtop)&&(e.logger.info("use mtop"),function(e,t){window&&window.lib.mtop&&window.lib.mtop.middlewares&&window.lib.mtop.middlewares.push((function(n){var o=this.params,r=this.options,l=Date.now();return n().then((function(){try{if(r.H5Request&&(r.getJSON||r.postJSON))return void e.logger.debug("识别到请求为xhr, api监控交由xhr的方式处理");var n,d=r.retJson||{},p=Date.now()-l,f=d.code||200,w=o.type,g=o.api,m=e.toolKit.objToQueryString(r.querystring),h=r.postdata&&r.postdata.data?e.toolKit.objToJsonString(r.postdata.data):null,v=e.toolKit.objToJsonString(d.data||{}),_=d.ret;_ instanceof Array&&(_=_.join(",")),-1===_.indexOf("SUCCESS")&&(n=_);var y=!0,b={};if("function"==typeof t.errorFilter&&(y=!!(b=t.errorFilter.call(this,{url:g,status:f,response:v,body:h,queryString:m,msg:n})),e.logger.warn("api errorFilter执行结果：",b)),y&&p<121e3&&s(g)){var T=b.bizCode||f,S={category:a.API,sampleRate:t.sampleRate,w_res:g,w_param:m,w_body:c(T)||!t.withBody?"":h,w_method:w,w_rc:T,w_rt:p,w_resp:c(T)||!t.withResp?"":b.resp||v,msg:b.msg||n||"",w_type:100};u(e,S,b)}}catch(t){e.reportError(t,{bid:i.BID,cid:i.CID,category:a.JSERR,sampleRate:1})}}))}))}(e,l))):e.logger.info("wpkinterfacePlugin已关闭")}};g.prototype.pluginId="api",e.exports=g}})}(ne);var oe=Z(ne.exports),ie={exports:{}};!function(e,t){e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==a(e)&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){e.exports={sdk:{BID:"wpkreporter",CID:"jssdk",WID_KEY:"__wpkreporterwid_"},env:{BROWSER:"browser",NODEJS:"nodejs",WEEX:"weex"},px:{signKey:"Uvn#08uefVdwe&c4",addr:{cn:"http://px.effirst.com/api/v1/jssdk/upload",cn_https:"https://px.effirst.com/api/v1/jssdk/upload",quark:"http://px.wpk.quark.cn/api/v1/jssdk/upload",quark_https:"https://px.wpk.quark.cn/api/v1/jssdk/upload",intl:"http://px-intl.ucweb.com/api/v1/jssdk/upload",intl_https:"https://px-intl.ucweb.com/api/v1/jssdk/upload",qg:"http://px-itrace.xuexi.cn/api/v1/jssdk/upload",qg_https:"https://px-itrace.xuexi.cn/api/v1/jssdk/upload"},confAddr:{cn:"http://px.effirst.com/api/v1/jconfig",cn_https:"https://px.effirst.com/api/v1/jconfig",intl:"http://px-intl.ucweb.com/api/v1/jconfig",intl_https:"https://px-intl.ucweb.com/api/v1/jconfig",qg:"http://px-itrace.xuexi.cn/api/v1/jconfig",qg_https:"https://px-itrace.xuexi.cn/api/v1/jconfig",quark:"http://px.wpk.quark.cn/api/v1/jconfig",quark_https:"https://px.wpk.quark.cn/api/v1/jconfig"}},http:{methods:{GET:"GET",PUT:"PUT",POST:"POST",HEAD:"HEAD",DELETE:"DELETE",OPTIONS:"OPTIONS",CONNECT:"OPTIONS",TRACE:"OPTIONS",PATCH:"OPTIONS"},protocols:{HTTP:"http:",HTTPS:"https:"}},category:{JSERR:1,API:2,JSFSPERF:3,RESLOADFAIL:4,FLOW:5,BKPG:6,HARLOG:7,PERFNEXT:1e3,MAINDOC:1e5,RESTIMING:100001},navConn:{types:{BLUETOOTH:"bluetooth",CELLULAR:"cellular",ETHERNET:"ethernet",MIXED:"mixed",NONE:"none",OTHER:"other",UNKNOWN:"unknown",WIFI:"wifi",WIMAX:"wimax"},effectiveTypes:{"2G":"2g","3G":"3g","4G":"4g",SLOW2G:"slow-2g"}}}},function(e,t,n){var o=n(0),i=function(e,t){if(e.env===o.env.BROWSER&&"undefined"!=typeof window){var n={enable:!0,sampleRate:(t=t||{}).sampleRate||1,rootNode:t.rootNode,ignorePageUrls:t.ignorePageUrls||null,maxDepth:t.maxDepth||8,minElements:t.minElements||10,keyNoteText:t.keyNoteText||[],onloadDuration:t.onloadDuration||8e3,wsDuration:t.wsDuration||3e3,startCheckingTime:t.startCheckingTime||5e3},i=e.toolKit.extend(n,t);if(i.enable){e.logger.info("wpkblankPagePlugin已开启");try{if(e.toolKit.isFunction(i.ignorePageUrls)&&i.ignorePageUrls(location))return void e.logger.info("当前页面在白屏检测的白名单中")}catch(e){}var r=!1;if(i.onloadDuration>0&&"complete"!==document.readyState&&!e.prerender)var a=setTimeout((function(){r=!0,e.reportBlankPage({w_fp:100,w_wst:i.onloadDuration}),clearTimeout(a)}),i.onloadDuration);var c=function(){clearTimeout(a);try{!r&&i.wsDuration>0&&function(e,t){var n=performance.timing;if("function"==typeof window.PerformanceNavigationTiming)try{var o=performance.getEntriesByType("navigation")[0];o&&(n=o)}catch(e){}if(n)try{n.responseEnd-n.fetchStart>=e&&t()}catch(e){}}(i.wsDuration,(function(){e.reportBlankPage({w_fp:104,w_wst:i.wsDuration})}));var t=setTimeout((function(){!function(e,t){var n,i,r,a,c,s=0,l=0,u=!1,d=[],p=function(e){return 0===e.style.width||0===e.style.height||"none"===e.style.display||0===e.style.opacity||"hidden"===e.style.visibility||"collapse"===e.style.visibility||void 0!==e.type&&"hidden"===e.type},f=function(e){return e&&-1!==["VIDEO","IMG","BUTTON","TEXTAREA","RADIO","CHECKBOX","SELECT","IFRAME","CANVAS","SVG"].indexOf(e.nodeName)},w=function n(o,i){for(var r=Array.prototype.slice.call(o);r.length;){var a=r.shift();i>s&&(s=i),d.push({tag:a.tagName,layer:i,cls:a.className});var c=p(a);if(e.logger.info("depth："+i,a.nodeType,a.tagName,c),!c){if(l++,f(a)){u=!0,e.logger.info("有可见元素，非白屏");break}i<=t.maxDepth&&!p(a)&&a.children.length&&n(a.children,i+1)}}},g=!1;if(i=t.rootNode?"function"==typeof t.rootNode?t.rootNode():t.rootNode:document.body)if(r=i.innerText)a=t.keyNoteText,c=r,e.toolKit.some(a,(function(e){return e===c}))?(g=!0,n=102,e.logger.warn("肯定白屏，命中关键字",r)):(g=!1,u=!0);else{var m=Array.prototype.slice.call(i.children);w(e.toolKit.filter(m,(function(e){return-1===["STYLE","SCRIPT","LINK"].indexOf(e.nodeName)})),1)}else g=!0,n=103,e.logger.warn("白屏，木有body标签或者指定的root节点为空");e.logger.warn("元素数: ",l),e.logger.warn("遍历的最大层级: ",s),e.logger.warn("dsl",d),!g&&!u&&l<t.minElements&&(g=!0,n=101),g&&(e.logger.warn("白屏了",n),e.reportBlankPage({w_fp:n,w_dsl:JSON.stringify(d),w_depth:s,w_domcnt:l}),e.report({category:o.category.MAINDOC,sampleRate:1,bl1:JSON.stringify(document.documentElement.innerHTML),_forcePost:!0}),!e._hasCollectResTiming&&performance&&"function"==typeof performance.getEntriesByType&&(e.report({category:o.category.RESTIMING,bl1:JSON.stringify(performance.getEntriesByType("resource")),bl2:performance.timeOrigin||performance.timing.fetchStart,_forcePost:!0}),e._hasCollectResTiming=!0))}(e,i),clearTimeout(t)}),i.startCheckingTime)}catch(t){e.logger.error("bkpg checking oops: ",t)}};e.toolKit.onPageReady(c,!0,e.prerender),e.toolKit.onListen(window,"beforeunload",(function(){e.toolKit.offListen(window,"load"),c=null}))}else e.logger.info("wpkblankPagePlugin已关闭")}};i.prototype.pluginId="bkpg",e.exports=i}])}(ie);var re,ae,ce=Z(ie.exports),se=T(),le=function(){se||window.isTrace2||document.addEventListener("DOMContentLoaded",(function(){window.__wpk.addPlugin(ce,{rootNode:document.getElementById("container")||document.getElementById("root")})}))},ue=S(),de=(re=document.head.querySelector('meta[name="wpk-rel"]'))&&re.getAttribute("content")?re.getAttribute("content"):"",pe=function(){var e=document.head.querySelector('meta[name="wpk-sampleRate"]');return e&&e.getAttribute("content")?Number(e.getAttribute("content")):""}(),fe=h(),we=!!(ae="object"===("undefined"==typeof location?"undefined":a(location))&&location.hostname||"")&&(ae.indexOf("i.lazada.")>=0||ae.indexOf("-p.lazada.")>=0||ae.indexOf("pre-wormhole.")>=0||ae.indexOf("pre.lazada.")>=0||ae.indexOf("pre-www.lazada.")>=0||ae.indexOf("pre-wallet-nav.lazada.")>=0||ae.indexOf("-staging.lazada.")>=0)&&fe.iTraceDebug,ge=location.pathname.includes("/wow/i/sg/o2o-test/");var me={bid:ue,cid:"",uid:$("lzd_uid"),utdid:$("utdid"),rel:de||"2.0.19",sampleRate:pe||1,cluster:"intl",debug:we||ge,beforeSend:function(e){var t,n;n=!1,1===(t=e).category&&U(.01)&&(n=!0),2===t.category&&200!==t.w_rc&&U(.1)&&(n=!0),4===t.category&&U(.1)&&(n=!0),200===t.category&&J(t.c1)>5e3&&(n=!0),202===t.category&&J(t.wl_avgv1)>6e3&&(n=!0),n&&G({module:"h5_itrace",subModule:t.w_bid,info:r({},t)});var o=(window.lzdiTraceLifeCircle||{}).lzdiTraceBeforeSend;try{return e&&o&&"function"==typeof o&&(e=o(e)),e}catch(t){return console.error("iTrace sdk beforeSend Format function execute error",t),e}}},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"boolean"==typeof e.isDebug&&(e.debug=e.isDebug),e.pid&&(e.bid=e.pid),Object.assign({},me,e)},ve=/AliApp/.test(Q),_e=T(),ye=!!document.querySelector("meta[name='wpk-bid']"),be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.pid){if(window.isTrace2)return Te(e);if("function"==typeof window.wpkReporter){var t=null;if(window.__wpk)e.pid&&(e.bid=e.pid,delete e.pid),window.__wpk.setConfig(e),t=window.__wpk;else{if(ye&&ve&&_e){var n=he(r(r({},e),{},{plugins:[[te,{enable:!1}]]}));(t=new o.default(n)).install()}else{var i=he(r(r({},e),{},{plugins:[[oe,{enable:!1}]]}));(t=new o.default(i)).installAll(),le()}window.__wpk=t}return console.log("lzd-h5-itrace version: v".concat("2.0.19")),t}console.warn("wpk-reporter is not ready.")}else console.warn("[lzd-h5-itrace] 实例化失败，缺少必要参数")},Te=function(){var e=he(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return window.__wpk.setConfig(e),window.__wpk},Se=!1,Oe=function(e){if(!Se){var t=function(e){var t=e.name,n=e.duration,o=void 0===n?0:n,i=e.decodedBodySize,r=void 0===i?0:i,a=e.encodedBodySize,c=void 0===a?0:a,s=e.transferSize,l=void 0===s?0:s;try{var u=new URL(t);window.__wpk.report({category:202,msg:u.hostname,wl_avgv1:o.toFixed(2),wl_avgv2:r,wl_avgv3:c,wl_avgv4:l,c1:t,bl5:JSON.stringify(e),sampleRate:.01})}catch(e){}},n=function(e){var n=function(e){var t,n=new URL(e.name);return"https:"!==n.protocol&&"http:"!==n.protocol||"img"!==e.initiatorType||(t=n.hostname).includes("member.lazada.")||t.includes("my.lazada.")||t.includes("www.lazada.")||t.includes("pages.lazada.")||t.includes("c.lazada.")||t.includes("www.google.")||t.includes("translate.google.")||t.includes("criteo.net")||t.includes("doubleclick.net")||t.includes("googleadservices")||t.includes("cnzz.com")||t.includes("log.aliyuncs.com")||t.includes("mmstat.")||t.includes("clarity")||t.includes("ucweb.com")||t.includes("googleapis")||-1!==["graph.facebook.com","connect.facebook.net","csi.gstatic.com","airunit.taobao.com","acjs.aliyun.com","whos.amung.us","kcart.alipay.com","www.google-analytics.com","px-intl.ucweb.com","www.googletagmanager.com","googleads.g.doubleclick.net","www.facebook.com","gm.mmstat.com","sg.mmstat.com","bat.bing.com","cm.everesttech.net","pixel.everesttech.net","retcode-sg-lazada.arms.aliyuncs.com","fourier.taobao.com","pixel.tapad.com","secure.adnxs.com","s-cs.send.microad.jp","cs.adingo.jp"].indexOf(t)?null:e}(e);n&&(window.requestIdleCallback?window.requestIdleCallback((function(){t(n)})):setTimeout((function(){t(n)}),0))};if(Se=!0,console.log("[lzd-h5-itrace 2.0] init images perf monitor"),window.isTrace2&&window.__wpk.setConfig(e),window.__wpk||be(e),window.performance&&window.PerformanceObserver)window.performance.getEntriesByType("resource").forEach((function(e){n(e)})),new PerformanceObserver((function(e){e.getEntries().forEach((function(e){n(e)}))})).observe({entryTypes:["resource"]})}};var ke=function(){var e=[],t=screen.width*screen.height,n=3e3,o=200,i=null,r=!1,a=!1,c=["SCRIPT","LINK","SVG","IMG","VIDEO"],s=[];function l(e){if(!e)return"";var t=e.nodeName.toLowerCase();return""!==e.id?"".concat(t,"#").concat(e.id):"string"==typeof e.className?"".concat(t,".").concat(e.className.replace(" ",".")):t}function u(e){var t=[];T(e,(function(e){T(e.addedNodes,(function(e){1===e.nodeType&&t.push(e)}))})),t.length>0&&h(t.concat([]))}var d=null;function p(e){r||(a=!0,i&&clearTimeout(i),d.disconnect(),d.takeRecords(),setTimeout((function(){r=!0,y(e)}),1e3))}var f=function(){};function w(t,n){var o=0===e.length,i=screen.width,r=screen.height,a=document.documentElement,c=a?Math.min(a.clientHeight,r):r,s=a?Math.min(a.clientWidth,i):i,l=t.left+t.width,u=t.top+t.height,d=Math.round(.02*Math.min(i,r)),p=Math.round(.05*r);return o?t.width>=n||t.height>=n?d:l>=d&&s-t.left>=d&&u>=p&&c-t.top>=p:t.width>=2*d&&t.height>=2*d&&l>=p&&s-t.left>=p&&u>=p&&c-t.top>2*p}function g(e,t,n){var o=n||0;return T(e,(function(e){o=t(e,o)})),o}function m(e){var t=function(){e.lastTime=Math.max(b(),e.lastTime),e.c=document.getElementsByTagName("*").length,v()};window.requestAnimationFrame?requestAnimationFrame(t):setTimeout(t,0)}function h(n){var o=b(),i={createTime:o,lastTime:o,wait:0,piece:[],v:0,c:document.getElementsByTagName("*").length};T(n,(function(e){(function(e){for(var t=s.length,n=null,o=0;o<t;o++)if((n=s[o])&&n.contains&&n.contains(e))return!0;return!!e.hasAttribute("ignoreFspCollection")&&(s.push(e),!0)})(e)||function(e,n,o){var i=e.piece,a=document.documentElement.scrollTop||window.pageYOffset||document.body&&document.body.scrollTop||0,s=document.documentElement.scrollLeft||window.pageXOffset||document.body&&document.body.scrollLeft||0,u=o?null:n.getBoundingClientRect(),d=o||{type:0,className:"",top:u.top+a,left:u.left+s,width:u.width,height:u.height,domPath:l(n)},p=n.offsetParent;p&&p.offsetWidth<p.scrollWidth&&(d.width=Math.min(p.offsetWidth,d.width)),p&&p.offsetHeight<p.scrollHeight&&(d.height=Math.min(p.offsetHeight,d.height));var f=n.tagName;if(-1!=c.indexOf(f.toUpperCase())&&"IMG"==f){var h=0;d.width=Math.max(d.width,1),d.height=Math.max(d.height,1),d.type=1,w(d)&&(e.wait+=1,n.addEventListener("load",(function o(){if(r)n.removeEventListener("load",o,!0);else{h++,e.wait-=1;var i=n.getBoundingClientRect(),a=b();w(d,!0)&&(h<=1||a<=1e3)?(d.width=i.width,d.height=i.height,e.lastTime=Math.max(a,e.lastTime),d.size=i.width*i.height,d.v=d.size/t,e.v=g(e.piece,(function(e,t){return e.v+t}),0),m(e)):v()}}),!0),n.addEventListener("error",(function t(){r?n.removeEventListener("error",t,!0):(e.wait-=1,w(d)?(e.lastTime=Math.max(b(),e.lastTime),0===e.wait&&(e.v=g(e.piece,(function(e,t){return e.v+t}),0),m(e))):v())}),!0))}var _={};if(window.getComputedStyle&&("none"===(_=window.getComputedStyle(n,null)).display||"fixed"===_.position))return i;if(w(d)){var y=_.backgroundImage||"",T=/url\(['"]?(.*?)['"]?\)/i;if(T.test(y)&&(y=y.replace(T,"$1"),!/^data:/i.test(y)&&y!==location.href)){e.wait+=1;var S=document.createElement("img");S.onload=function(){e.wait-=1,e.lastTime=Math.max(b(),e.lastTime),0===e.wait&&m(e)},S.src=y}(function(e,t){var n=null;for(var o in e)if(n=e[o],t.top>=n.top&&t.left>=n.left&&t.top+t.height<=n.top+n.height&&t.left+t.width<=n.left+n.width)return!0;return!1})(i,d)||(d.size=d.width*d.height,d.v=d.size/t,e.v+=d.v,d.size&&i.push(d))}}(i,e)})),i.piece.length>0&&(e.push(i),m(i))}function v(){if(!a&&!r){i&&clearTimeout(i),i=setTimeout((function(){p()}),n);for(var t=null,o=null,c=0,s=0,l=0,u=0,d=0,f=e.length-1;f>1;f--){if(t=e[f],o=e[f-1],u=Math.floor(100*t.v)/100,s=(d=Math.floor(100*o.v)/100)?Math.abs(u-d)/d:0,(l+=Math.min(t.v,1))>4){p();break}if(s<.5){if(++c>6){p();break}}else c>0&&(c=0)}}}var _=0;function y(t){t&&(r=!0);var n=e.length;if(0!==n){var i=[],a=[],c=[],s=[],l=-1,u=0,d=0,w=0;for(w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,o=e.length-1,i=0;do{var r=e[o],a=e[o-1];if(!(Math.abs(r-a)/r<t))break;i++,o--}while(o>0);return i>=n&&o>0?Math.min(o,e.length-1):e.length-1}(e.map((function(e){return Math.floor(100*e.v)/100}))),a=w>0?e.slice(0,n+2):e;a.length>0;)if(s.push([]),l=a[0].lastTime,u=a[0].c,c=[],d=0,w=0,T(a,(function(e){d+=e.v,w++,e.createTime<=l+o&&(s[s.length-1].push({frame:e}),l=Math.max(l,e.lastTime),u=Math.max(u,e.c)),e.lastTime>l&&c.push(e)})),a=c,d<.02||d/w<.01?_++:_=0,i.push([l,u]),_>=3){i.splice(i.length-3),s.splice(i.length-3),p();break}var g=i.length-1;0!==_&&g>=_&&(g-=_),g=i[g];var m=null,h=null;u=null;try{var v;g&&(m=g[0],u=g[1],function(e,t,n){if(!window.dispatchEvent||!window.CustomEvent)return;var o={cost:t,timestamp:e,domSize:n},i=new CustomEvent("jstracker.fsp",{detail:o});window.__itrace_fsp_detail__=o,window.dispatchEvent(i)}(h=performance.timing.navigationStart+m,m,u)),window.resultFrames=(v=[]).concat.apply(v,s).map((function(e,t){var n;return e.index=t+1,e.uuid=(n=8,Number(Math.random().toString().substr(2,n)+Date.now()).toString(36)),e})),window.__wpk&&window.__wpk.report&&window.__wpk.report({category:208,msg:"FSP分片信息上报",bl1:JSON.stringify(window.resultFrames)}),f&&f(h,m,u)}catch(e){}}}function b(){return performance.now()}function T(e,t){if(Array.prototype.forEach)Array.prototype.forEach.call(e,t);else for(var n=e.length,o=0;o<n;o++)t(e[o],o)}return{install:function(){window.performance&&window.MutationObserver&&((d=new MutationObserver(u)).observe(document.documentElement,{childList:!0,subtree:!0}),h(document.querySelectorAll("BODY > *")),setTimeout((function(){p(!0)}),3e4))},onReport:function(e){e&&"function"==typeof e&&(f=e)},forceStop:function(){y(!0)}}}(),Ee=ke,xe=!1,Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!xe){xe=!0,window.__wpk||be(e);var t="",n=(window.lzdiTraceLifeCircle||{}).FSPStart,o=function(n){var o=n.timestamp,i=n.time,r=n.domSize,a=n.ssrTime,c=void 0===a?"":a,s=window.lzdiTraceLifeCircle||{},l=s.lzdiTraceShareFspTime,u=s.FSPEnd;if(console.log("[fsp-report 2.0]",o,i,r,window.preLoadTime,c),window.__lzd_fsp_done=!0,window.__wpk&&window.__wpk.report){var d=Math.floor(i)-Math.floor(window.preLoadTime||0);if(window.__lzd_fsp_value=d,d>0&&d<2e4){var p=e.msg||"自定义首屏";p=_(p);var f=window.performance.getEntriesByType("navigation")[0],w=f&&f.responseEnd;window.__wpk.report({category:e.category||200,msg:p,wl_avgv1:d,wl_avgv2:window.__SSR_FS_TIME||void 0,wl_avgv3:w,wl_avgv4:c||void 0,c1:d,c2:i,c3:window.preLoadTime||"-",c4:t,c5:window.__SSR_TRACE_ID||"-"}),"function"==typeof l&&l({fspTime:d,preLoadTime:window.preLoadTime,url:location.href}),"function"==typeof u&&u()}else{var g=d<0?"负值":"极大值 (>20s)";window.__wpk.report({category:e.category||200,msg:"".concat(g),c1:d,c2:i,c3:window.preLoadTime||"-",c4:t})}}};if("function"==typeof n&&n(),window.fspTracker){window.__isSSR&&(t="SourcePageSSR");var i=function(e){var t=e.cost,n=e.timestamp,i=e.domSize,r=e.ssrTime;o({time:t,timestamp:n,domSize:i,ssrTime:r})};window.__FSP?i(window.__FSP):window.fspTracker.listeners.push((function(e){i(e)}))}else if(!0===window.rocket_pre_hot)Ee.install(),Ee.onReport((function(e,t,n){o({timestamp:e,time:t,domSize:n})}));else if(window.lzdFspTrackerPlugin){var r=window.__itrace_fsp_detail__;r?o({timestamp:r.timestamp,time:r.cost,domSize:r.domSize}):window.lzdFspTrackerPlugin.onReport((function(e,t,n){o({timestamp:e,time:t,domSize:n})}))}else Ee.install(),Ee.onReport((function(e,t,n){o({timestamp:e,time:t,domSize:n})}))}},je=["scene","status","value","args"],Le=[/c\.go\-mpulse\.net/,/ds\-aksb\-a\.akamaihd\.net\/RRT/,/s\.akamaihd\.net\/eum\/getdns\.txt/,/pre\-wormhole/],Ie=["SUCCESS","UNION_NOT_MATCH_FREQUENCY","FAIL_SYS_TOKEN_EMPTY","FAIL_SYS_ILLEGAL_ACCESS","FAIL_SYS_TOKEN_EXOIRED","FAIL_SYS_TOKEN_ILLEGAL"],Ce={SG:"acs-m.lazada.sg",ID:"acs-m.lazada.co.id",PH:"acs-m.lazada.com.ph",VN:"acs-m.pages.lazada.vn",TH:"acs-m.pages.lazada.co.th",MY:"acs-m.pages.lazada.com.my"};var Re,Ae,De,Ne,Me=function(e,t,n,o,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};Le.some((function(t){return t.test(e)}))||window.__wpk.reportApi(r({msg:i,url:e,method:t,status:o,spent:n,response:o},a),{})},ze=function(e){var t,n,o=e.params,i=e.options,r=e.spent,a=e.performanceNow,c="",s=i.retJson,l=void 0===s?{}:s,u=i.path,d=i.prefix,p=i.subDomain,f=i.pageDomain,w=l.responseHeaders,g=void 0===w?"":w,m=l.ret,h=b(g),v=function(e){var t=e&&e.length&&e[0].split("::");return t&&t[1]?{key:t[0],displayMessage:t[1]}:-1!==e[0].indexOf("FAIL_SYS")||-1!==e[0].indexOf("SYSTEM_ERROR")||-1!==e[0].indexOf("UNKNOWN_FAIL_CODE")||-1!==e[0].indexOf("TIMEOUT")?{key:t[0],displayMessage:"Network Error"}:{key:e[0],displayMessage:"Unknown Error"}}(m),_=v.displayMessage,y=o.type||"",T=l.v||o.v||"",S=o["x-i18n-regionID"]||"-",O=Ce[S.toUpperCase()]||S,k=l.api||o.api||"";k=k.toLowerCase(),t=o.ext_headers&&o.ext_headers["x-uid"]||"",n=Ie.includes(v.key)?200:0,c=u?"https:".concat(u):p&&f?"https://".concat(d?d+".":"").concat(p,".").concat(f,"/gw/").concat(k,"/").concat(T):"https://".concat(O,"/gw/").concat(k,"/").concat(T),Me(c,y,r,n,v.key,{c1:t,c2:h,c3:_,c4:a,c5:v.key,c6:window.location.origin+window.location.pathname})},qe=function(e){var t;((window.__iTraceMtopQueue||[]).forEach((function(e){ze(e)})),window.__iTraceMtopQueue=[],window.iLogger&&(window.iLogger.mtopReport=ze),window.isMtopMiddlewareReady)||(window.__wpk||be(e),console.log("--- iLoggerMtopPluginInit ---"),window,(t=window.lib||(window.lib={}))&&t.mtop&&!t.mtop.ERROR?(t.mtop.middlewares.push((function(e){var t=this.params,n=this.options,o=n.querystring,i=parseInt((void 0===o?{}:o).t)||Date.now(),r=void 0;return performance&&"function"==typeof performance.now&&(r=Math.floor(performance.now())-Math.floor(window.preLoadTime||0)),e().then((function(){var e=(n.results[0]||{}).stat,o=(void 0===e?{}:e).oneWayTime||Date.now()-i;ze({params:t,options:n,spent:o,performanceNow:r})}))})),window.isMtopMiddlewareReady=!0,console.log("[lzd-h5-itrace] mtop itrace plugin init success!")):console.warn("[lzd-h5-itrace] Mtop 没有初始化，无法添加 Mtop Itrace 监控插件！请参考 Mtop 文档 http://gitlab.alibaba-inc.com/mtb/lib-mtop ",t))},Fe=qe,He=[".webp",".png",".jpg",".gif"],Be=!1,Ke=function(e){if(window.IMG_PRELOAD_PROFILE_PLUGIN&&!Be&&(Be=!0,console.log("[lzd-h5-itrace 2.0] init preload profile monitor"),window.isTrace2&&window.__wpk.setConfig(e),window.__wpk||be(e),window.performance&&window.PerformanceObserver)){var t,n=window.performance.getEntriesByType("resource")||[],o=[],i=0,r=n.filter((function(e){if("link"===e.initiatorType&&He.some((function(t){return e.name.endsWith(t)}))&&o.push(e),"link"===e.initiatorType&&e.name.endsWith(".css"))return i+=e.duration,t?e.responseEnd<t&&(t=e.responseEnd):t=e.responseEnd,!0}));if(!(r&&r.length&&o&&o.length))return;var a=[],c=[],s=0,l=0;o.forEach((function(e){e.requestStart>t?(a.push(e),s+=e.duration):(c.push(e),l+=e.duration)}));try{window.__wpk.report({category:206,msg:"Image Preload Profile",w_succ:a.length<1?1:0,wl_avgv1:c.length,wl_avgv2:a.length,wl_avgv3:i/(r.length||1),wl_avgv4:l/(c.length||1),wl_avgv5:s/(a.length||1),bl1:c.map((function(e){return e.name})).join(";"),bl2:a.map((function(e){return e.name})).join(";")})}catch(e){}}},We=-1,Ge=function(e){addEventListener("pageshow",(function(t){t.persisted&&(We=t.timeStamp,e(t))}),!0)},Ue=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},Je=function(){var e=Ue();return e&&e.activationStart||0},Ve=function(e,t){var n=Ue(),o="navigate";return We>=0?o="back-forward-cache":n&&(document.prerendering||Je()>0?o="prerender":document.wasDiscarded?o="restore":n.type&&(o=n.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:o}},Xe=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var o=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return o.observe(Object.assign({type:e,buffered:!0},n||{})),o}}catch(e){}},Ye=function(e,t,n,o){var i,r;return function(a){t.value>=0&&(a||o)&&((r=t.value-(i||0))||void 0===i)&&(i=t.value,t.delta=r,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},$e=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},Qe=function(e){var t=function(t){"pagehide"!==t.type&&"hidden"!==document.visibilityState||e(t)};addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0)},Ze=function(e){var t=!1;return function(n){t||(e(n),t=!0)}},et=-1,tt=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},nt=function(e){"hidden"===document.visibilityState&&et>-1&&(et="visibilitychange"===e.type?e.timeStamp:0,it())},ot=function(){addEventListener("visibilitychange",nt,!0),addEventListener("prerenderingchange",nt,!0)},it=function(){removeEventListener("visibilitychange",nt,!0),removeEventListener("prerenderingchange",nt,!0)},rt=function(){return et<0&&(et=tt(),ot(),Ge((function(){setTimeout((function(){et=tt(),ot()}),0)}))),{get firstHiddenTime(){return et}}},at=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},ct=[1800,3e3],st=function(e,t){t=t||{},at((function(){var n,o=rt(),i=Ve("FCP"),r=Xe("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(r.disconnect(),e.startTime<o.firstHiddenTime&&(i.value=Math.max(e.startTime-Je(),0),i.entries.push(e),n(!0)))}))}));r&&(n=Ye(e,i,ct,t.reportAllChanges),Ge((function(o){i=Ve("FCP"),n=Ye(e,i,ct,t.reportAllChanges),$e((function(){i.value=performance.now()-o.timeStamp,n(!0)}))})))}))},lt=[.1,.25],ut={passive:!0,capture:!0},dt=new Date,pt=function(e,t){Re||(Re=t,Ae=e,De=new Date,gt(removeEventListener),ft())},ft=function(){if(Ae>=0&&Ae<De-dt){var e={entryType:"first-input",name:Re.type,target:Re.target,cancelable:Re.cancelable,startTime:Re.timeStamp,processingStart:Re.timeStamp+Ae};Ne.forEach((function(t){t(e)})),Ne=[]}},wt=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){pt(e,t),i()},o=function(){i()},i=function(){removeEventListener("pointerup",n,ut),removeEventListener("pointercancel",o,ut)};addEventListener("pointerup",n,ut),addEventListener("pointercancel",o,ut)}(t,e):pt(t,e)}},gt=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,wt,ut)}))},mt=[100,300],ht=[2500,4e3],vt={},_t=function(e){return/use_ssr=true/.test(window.location.href)?e-(y().uprproxy_time||0):window.__IS_TRADITION_SSR?e:window.__IS_KANGAROO_SSR?e-(window.prehotShowUpTime||0):e},yt=function(e){!function(e,t){t=t||{},at((function(){var n,o=rt(),i=Ve("LCP"),r=function(e){var t=e[e.length-1];t&&t.startTime<o.firstHiddenTime&&(i.value=Math.max(t.startTime-Je(),0),i.entries=[t],n())},a=Xe("largest-contentful-paint",r);if(a){n=Ye(e,i,ht,t.reportAllChanges);var c=Ze((function(){vt[i.id]||(r(a.takeRecords()),a.disconnect(),vt[i.id]=!0,n(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,c,!0)})),Qe(c),Ge((function(o){i=Ve("LCP"),n=Ye(e,i,ht,t.reportAllChanges),$e((function(){i.value=performance.now()-o.timeStamp,vt[i.id]=!0,n(!0)}))}))}}))}((function(e){D({group:"web_vitals",event:"web_vitals_lcp",lcp_value:_t(e.value)})})),st((function(e){D({group:"web_vitals",event:"web_vitals_fcp",fcp_value:_t(e.value)})})),function(e,t){t=t||{},at((function(){var n,o=rt(),i=Ve("FID"),r=function(e){e.startTime<o.firstHiddenTime&&(i.value=e.processingStart-e.startTime,i.entries.push(e),n(!0))},a=function(e){e.forEach(r)},c=Xe("first-input",a);n=Ye(e,i,mt,t.reportAllChanges),c&&Qe(Ze((function(){a(c.takeRecords()),c.disconnect()}))),c&&Ge((function(){var o;i=Ve("FID"),n=Ye(e,i,mt,t.reportAllChanges),Ne=[],Ae=-1,Re=null,gt(addEventListener),o=r,Ne.push(o),ft()}))}))}((function(e){D({group:"web_vitals",event:"web_vitals_fid",fid_value:e.value})})),function(e,t){t=t||{},st(Ze((function(){var n,o=Ve("CLS",0),i=0,r=[],a=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=r[0],n=r[r.length-1];i&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(i+=e.value,r.push(e)):(i=e.value,r=[e])}})),i>o.value&&(o.value=i,o.entries=r,n())},c=Xe("layout-shift",a);c&&(n=Ye(e,o,lt,t.reportAllChanges),Qe((function(){a(c.takeRecords()),n(!0)})),Ge((function(){i=0,o=Ve("CLS",0),n=Ye(e,o,lt,t.reportAllChanges),$e((function(){return n()}))})),setTimeout(n,0))})))}((function(e){D({group:"web_vitals",event:"web_vitals_cls",cls_value:e.value})}))},bt=S(),Tt={},St=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={selfDefineFSP:!0,mtopPluginInit:!0,imagesPerf:!0,assetPerf:!0,didMountTimeReport:!0,preloadProfile:!0,webVitals:!0},n=document.head.querySelector('meta[name="lzd-itrace-close-auto-monitor"]');n&&n.getAttribute("content")&&n.getAttribute("content").split(",").forEach((function(e){var n=e.trim();t[n]=!1}));!function(){window.lzdiTraceLifeCircle=Object.assign({},window.lzdiTraceLifeCircle);var e=window.performance.timing||{};window.lzdiTraceLifeCircle.NativePrefetchEnd=function(){Y({event:"native_prefetch_end",time:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)||Date.now()})},window.lzdiTraceLifeCircle.FirstScreenRenderingStart=function(){Y({event:"first_screen_rendering_start",time:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)||e.responseStart})},window.lzdiTraceLifeCircle.FirstScreenRenderingEnd=function(){Y({event:"first_screen_rendering_end",time:Date.now(),costTime:Date.now()-(V.first_screen_rendering_start||e.responseStart)})},window.lzdiTraceLifeCircle.FSPStart=function(){Y({event:"fsp_start",time:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)||e.responseStart})},window.lzdiTraceLifeCircle.FSPEnd=function(){Y({event:"fsp_end",time:Date.now(),costTime:Date.now()-(V.fsp_start||e.responseStart)})},window.lzdiTraceLifeCircle.FetchSSRDataStart=function(){Y({event:"fetch_ssr_data_start",time:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)||e.domComplete})},window.lzdiTraceLifeCircle.FetchSSRDataEnd=function(){Y({event:"fetch_ssr_data_end",time:Date.now(),costTime:Date.now()-(V.fetch_ssr_data_start||e.domComplete)})},window.lzdiTraceLifeCircle.FetchFirstScreenDataStart=function(e){e&&Y({event:"fetch_first_screen_data_start",time:e})},window.lzdiTraceLifeCircle.FetchFirstScreenDataEnd=function(e){e&&Y({event:"fetch_first_screen_data_end",time:e,costTime:e-V.fetch_first_screen_data_start})},window.lzdiTraceLifeCircle.PageRenderingEnd=function(){Y({event:"page_rendering_end",time:Date.now(),costTime:Date.now()-(V.page_rendering_start||e.responseStart)})},console.log("[lzd-h5-itrace] lifecyle report plugin ready"),document.addEventListener("DOMContentLoaded",(function(){Y(X)}))}(),t.selfDefineFSP?Pe(e):console.log("[lzd-h5-itrace] close auto run selDefineFSP"),t.imagesPerf?Oe(e):console.log("[lzd-h5-itrace] close auto run iLoggerImagesPerf"),t.assetPerf?function(){if(!v){var e=function(e){var t=e.name,n=e.responseStart,i=e.fetchStart,r=e.domainLookupEnd,a=e.domainLookupStart,c=e.requestStart,s=e.responseEnd,l=e.connectEnd,u=e.connectStart,d=e.transferSize,p=e.decodedBodySize,f=e.startTime;try{var w={category:204,msg:new URL(t).hostname,wl_avgv1:n-i,wl_avgv2:r-a,wl_avgv3:l-u,wl_avgv4:n-c,wl_avgv5:s-n,wl_avgv6:s-i,wl_avgv7:d,wl_avgv8:p,wl_avgv9:f,wl_avgv10:Math.floor(window.preLoadTime||0),wl_avgv11:f-Math.floor(window.preLoadTime||0)>0?f-Math.floor(window.preLoadTime||0):f,c1:t,c2:0===n?"true":"false",bl_1:o,sampleRate:.05};n>=0&&window.__wpk.report(w)}catch(e){}},t=function(t){window.requestIdleCallback?window.requestIdleCallback((function(){e(t)})):setTimeout((function(){e(t)}),0)},n=function(e){e.filter((function(e){var t=e.initiatorType,n="css"===t&&e.name.endsWith(".css"),o="link"===t&&(e.name.endsWith(".js")||e.name.endsWith(".css"));return"script"===t||n||o})).forEach(t)};if(v=!0,!window.__wpk)return;var o=(h()||{}).wh_pid||location.pathname;if(console.log("[lzd-h5-itrace] init asset perf monitor"),window.performance&&window.PerformanceObserver){var i="resource",r=window.performance.getEntriesByType(i);n(r),new PerformanceObserver((function(e){n(e.getEntries())})).observe({entryTypes:[i]})}}}():console.log("[lzd-h5-itrace] close auto run iLoggerAssetPerf"),window.lib&&window.lib.mtop&&t.mtopPluginInit?Fe(e):console.log("[lzd-h5-itrace] close auto run mtopPluginInit"),t.didMountTimeReport?H():console.log("[lzd-h5-itrace] disable didMountTimeReport"),t.preloadProfile?Ke(e):console.log("[lzd-h5-itrace] close preload profile plugin"),t.webVitals?yt():console.log("[lzd-h5-itrace] disable web vitals plugin"),window.itracePluginInitialized=!0};window&&(function(e){if(!window.isTrace2){window.addEventListener("oniLoggerMtopPluginInit",(function(e){qe(e.detail)}),!1);var t=!0;window.lib?window.lib.mtop&&(t=!1):window.lib={},t&&Object.defineProperty(window.lib,"mtop",{get:function(){return window.__lzdlib_mtop__},set:function(t){window.__lzdlib_mtop__=t,Object.defineProperty(window.lib.mtop,"middlewares",{get:function(){return window.__lzdlib_mtop_middlewares__},set:function(t){var n=new CustomEvent("oniLoggerMtopPluginInit",{detail:e||{}});window.__lzdlib_mtop_middlewares__=t,window.dispatchEvent(n)},configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}}(Tt),bt&&(be({pid:bt}),St({pid:bt}))),e.iLoggerDataTrack=function(e){var t=e.scene,n=void 0===t?"unkown":t,o=e.status,i=void 0===o?1:o,a=e.value,c=void 0===a?0:a,s=e.args,l=void 0===s?"":s,u=d(e,je);if(/1|0/.test(i))if(/^\d+$/.test(c)){var p={w_succ:i,wl_avgv1:c,msg:n,bl1:l};Object.keys(u).forEach((function(e){/^filter([0-9]|10)$/.test(e)&&(p[e.replace("filter","c")]=u[e])})),window.__wpk&&window.__wpk.report&&window.__wpk.report(r({category:207},p))}else console.error("[lzd-h5-itrace] iLoggerDataTrack value should be correct integer");else console.error("[lzd-h5-itrace] iLoggerDataTrack status should be 0 or 1")},e.iLoggerInit=be,e.iLoggerIntegrate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="";try{t=be(e)}catch(e){console.log("[lzd-h5-itrace] catch iTrace sdk error, make program go on!")}return St(e),Tt=e,t},e.iLoggerMtopPluginInit=Fe,e.iLoggerReportApi=Me,e.iLoggerSelfDefineFSP=Pe,Object.defineProperty(e,"__esModule",{value:!0})}));
